<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Crivit Rowing Monitor</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="container">
        <!-- Hidden status for JS tracking -->
        <span id="connection-status" class="hidden">Disconnected</span>
        <span id="activity-status" class="hidden">Idle</span>

        <main>
            <!-- Tab Content: Row -->
            <div id="tab-row" class="tab-content active">
                <!-- Row 1: Power | Distance | HR -->
                <section class="metrics-grid row-3">
                    <div class="metric-card large">
                        <div class="metric-label">Power</div>
                        <div class="metric-value" id="power">0</div>
                        <div class="metric-unit">watts</div>
                    </div>
                    
                    <div class="metric-card large">
                        <div class="metric-label">Distance</div>
                        <div class="metric-value" id="distance">0</div>
                        <div class="metric-unit">meters</div>
                    </div>

                    <div class="metric-card large heart-rate" id="hr-card">
                        <div class="metric-label">‚ù§Ô∏è Heart Rate</div>
                        <div class="metric-value" id="heart-rate">--</div>
                        <div class="metric-unit" id="hr-status">bpm</div>
                    </div>
                </section>

                <!-- Row 2: Time | Pace /500m -->
                <section class="metrics-grid row-2">
                    <div class="metric-card large">
                        <div class="metric-label">Time</div>
                        <div class="metric-value" id="elapsed-time">0:00</div>
                        <div class="metric-unit">elapsed</div>
                    </div>

                    <div class="metric-card large highlight">
                        <div class="metric-label">Pace /500m</div>
                        <div class="metric-value" id="pace">--:--</div>
                        <div class="metric-unit">min:sec</div>
                    </div>
                </section>

                <!-- Row 3: Peak Power | Stroke Rate | Strokes | Calories -->
                <section class="metrics-grid row-4">
                    <div class="metric-card">
                        <div class="metric-label">Peak Power</div>
                        <div class="metric-value" id="peak-power">0</div>
                        <div class="metric-unit">watts</div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-label">Stroke Rate</div>
                        <div class="metric-value" id="stroke-rate">0</div>
                        <div class="metric-unit">spm</div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-label">Strokes</div>
                        <div class="metric-value" id="stroke-count">0</div>
                        <div class="metric-unit">total</div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-label">Calories</div>
                        <div class="metric-value" id="calories">0</div>
                        <div class="metric-unit">kcal</div>
                    </div>
                </section>

                <!-- Row 4: Avg Power | Avg SPM | Avg HR | Avg Pace -->
                <section class="metrics-grid row-4 averages">
                    <div class="metric-card small">
                        <div class="metric-label">Avg Power</div>
                        <div class="metric-value" id="avg-power">0</div>
                    </div>

                    <div class="metric-card small">
                        <div class="metric-label">Avg SPM</div>
                        <div class="metric-value" id="avg-stroke-rate">0</div>
                    </div>

                    <div class="metric-card small">
                        <div class="metric-label">Avg HR</div>
                        <div class="metric-value" id="avg-heart-rate">--</div>
                    </div>

                    <div class="metric-card small">
                        <div class="metric-label">Avg Pace</div>
                        <div class="metric-value" id="avg-pace">--:--</div>
                    </div>
                </section>
            </div>

            <!-- Tab Content: Chart (placeholder) -->
            <div id="tab-chart" class="tab-content">
                <div class="placeholder-content">
                    <h2>üìä Chart</h2>
                    <p>Charts coming soon...</p>
                </div>
            </div>

            <!-- Tab Content: History -->
            <div id="tab-history" class="tab-content">
                <div class="history-content">
                    <h2>üìú Workout History</h2>
                    <div id="history-loading" class="history-loading">Loading workouts...</div>
                    <div id="history-empty" class="history-empty hidden">
                        <p>No saved workouts yet.</p>
                        <p>Complete a workout to see it here!</p>
                    </div>
                    <div id="history-list" class="history-list hidden"></div>
                </div>
            </div>

            <!-- Workout Detail Modal -->
            <div id="workout-detail-modal" class="modal hidden">
                <div class="modal-content workout-detail">
                    <h2 id="detail-title">Workout Details</h2>
                    <div class="workout-detail-grid">
                        <div class="detail-item">
                            <span class="detail-label">Date</span>
                            <span class="detail-value" id="detail-date">--</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Duration</span>
                            <span class="detail-value" id="detail-duration">--</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Distance</span>
                            <span class="detail-value" id="detail-distance">--</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Avg Pace /500m</span>
                            <span class="detail-value" id="detail-pace">--</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Avg Power</span>
                            <span class="detail-value" id="detail-power">--</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Strokes</span>
                            <span class="detail-value" id="detail-strokes">--</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Calories</span>
                            <span class="detail-value" id="detail-calories">--</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Drag Factor</span>
                            <span class="detail-value" id="detail-drag">--</span>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button id="btn-delete-workout" class="btn btn-danger">Delete</button>
                        <button id="btn-close-detail" class="btn btn-secondary">Close</button>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Settings -->
            <div id="tab-settings" class="tab-content">
                <div class="settings-content">
                    <h2>‚öô Settings</h2>
                    <form id="settings-form">
                        <div class="form-group">
                            <label for="user-weight">Weight (kg)</label>
                            <input type="number" id="user-weight" min="30" max="200" step="0.5" value="75">
                        </div>
                        <div class="form-group">
                            <label for="units">Units</label>
                            <select id="units">
                                <option value="metric">Metric</option>
                                <option value="imperial">Imperial</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="show-power" checked> Show Power
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="show-calories" checked> Show Calories
                            </label>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Settings</button>
                            <span id="settings-feedback" class="settings-feedback"></span>
                        </div>
                    </form>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation Bar -->
        <nav class="bottom-nav">
            <div class="nav-controls">
                <button id="btn-start-pause" class="btn btn-nav btn-start" aria-label="Start workout">‚ñ∂</button>
                <button id="btn-reset-workout" class="btn btn-nav btn-reset-workout" aria-label="Reset workout">‚Ü∫</button>
                <button id="btn-finish" class="btn btn-nav btn-finish" aria-label="Finish workout">‚úì</button>
            </div>
            <div class="nav-tabs">
                <button class="btn btn-tab active" data-tab="row">Row</button>
                <button class="btn btn-tab disabled" data-tab="chart">Chart</button>
                <button class="btn btn-tab" data-tab="history">History</button>
                <button class="btn btn-tab" data-tab="settings">Settings</button>
            </div>
        </nav>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal hidden">
        <div class="modal-content confirm-dialog">
            <h2 id="confirm-title">Confirm</h2>
            <p id="confirm-message">Are you sure?</p>
            <div class="modal-actions">
                <button id="btn-confirm-yes" class="btn btn-danger">Yes</button>
                <button id="btn-confirm-no" class="btn btn-secondary">No</button>
            </div>
        </div>
    </div>

    <script src="/app.js"></script>
</body>
</html>
